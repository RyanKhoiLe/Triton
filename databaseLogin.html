<!DOCTYPE HTML>
<html>
<head>
  <!-- created by Khoi Le 2016 !-->
  <title> New Exhibit Page Creator </title>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="tritonLoginCSS.css">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="icon" href="images/tritonIconSmall.png">
  <script src="https://www.gstatic.com/firebasejs/3.2.1/firebase.js"></script>
</head>
  <body>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyCVFksGcDoYDk23wAG58XdYdfyDL7urzUY",
        authDomain: "learnfirebase-43e98.firebaseapp.com",
        databaseURL: "https://learnfirebase-43e98.firebaseio.com",
        storageBucket: "learnfirebase-43e98.appspot.com",
      };
      firebase.initializeApp(config);
      var url = "https://learnfirebase-43e98.firebaseio.com";
      var firebaseRef = firebase.database();

      function checkUser(){
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            firebase.auth().signOut().then(function(){
              console.log("signed out");
            }, function(error){
              console.log("error signing out");
            });
          } else {

          }
        });
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var resultDisplay = document.getElementById("result");
        firebase.auth().signInWithEmailAndPassword(email, password).catch(function(error) {
          var errorCode = error.code;
          var errorMessage = error.message;
          console.log(errorCode + " " + errorMessage);
          if(error.code === "auth/wrong-password"){
            resultDisplay.textContent = "Sorry, that password is incorrect";
          }
          if(error.code === "auth/user-not-found"){
            resultDisplay.textContent = "Sorry, that username is incorrect";
          }
          if(error.code === "auth/invalid-email"){
            resultDisplay.textContent = "Sorry, that is not a real email";
          }
          // return;
        });
        firebase.auth().onAuthStateChanged(function(user) {
          if (user) {
            resultDisplay.textContent = "Logging in . . .";
            window.open("edithome.html", "_self");
          } else {

          }
        });

      }
    </script>
    <div id="headBar">
      <a href="www.lunasphere.com"><img id="lunasphereLogo" src="images/Logo.png" alt="Lunasphere"></a>
      <h1 id="pageTitle"> Login </h1>
      <a href="index.html"><img id="logoPageCreator" src="images/tritonIcon.png" alt="triton"></a>
      <div id="navBar">
        <a class="navBarLink" style="color: white" href="index.html"> triton database home </a>
        <a class="navBarLink" style="color: white" href="www.lunasphere.com"> visit lunasphere </a>
      </div>
    </div>
    <hr>
    <div id="wrapper">
      <div id="centerBox">
        <form action="#" onsubmit="event.preventDefault(); checkUser()">
          <div class="inputContainer">
            <h2> Username (email): </h2>
            <input type="email" id="email" placeholder="example@gmail.com">
          </div>
          <div class="inputContainer">
            <h2> Password: </h2>
            <input type="password" id="password" placeholder="*****">
          </div>
          <p id="result"> Please enter your credentials </p>
          <button type="submit">Log In</button>
        </form>
      </div>
    </div>
  </body>
</html>
